_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{"/0+H":function(e,t,n){"use strict";t.__esModule=!0,t.isInAmpMode=a,t.useAmp=function(){return a(o.default.useContext(i.AmpStateContext))};var r,o=(r=n("q1tI"))&&r.__esModule?r:{default:r},i=n("lwAK");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ampFirst,n=void 0!==t&&t,r=e.hybrid,o=void 0!==r&&r,i=e.hasQuery,a=void 0!==i&&i;return n||o&&a}},"7W2i":function(e,t,n){var r=n("SksO");e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},"8Kt/":function(e,t,n){"use strict";n("lSNA");t.__esModule=!0,t.defaultHead=l,t.default=void 0;var r,o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var i=r?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),i=(r=n("Xuae"))&&r.__esModule?r:{default:r},a=n("lwAK"),s=n("FYa8"),c=n("/0+H");function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[o.default.createElement("meta",{charSet:"utf-8"})];return e||t.push(o.default.createElement("meta",{name:"viewport",content:"width=device-width"})),t}function d(e,t){return"string"===typeof t||"number"===typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((function(e,t){return"string"===typeof t||"number"===typeof t?e:e.concat(t)}),[])):e.concat(t)}var f=["name","httpEquiv","charSet","itemProp"];function p(e,t){return e.reduce((function(e,t){var n=o.default.Children.toArray(t.props.children);return e.concat(n)}),[]).reduce(d,[]).reverse().concat(l(t.inAmpMode)).filter(function(){var e=new Set,t=new Set,n=new Set,r={};return function(o){var i=!0;if(o.key&&"number"!==typeof o.key&&o.key.indexOf("$")>0){var a=o.key.slice(o.key.indexOf("$")+1);e.has(a)?i=!1:e.add(a)}switch(o.type){case"title":case"base":t.has(o.type)?i=!1:t.add(o.type);break;case"meta":for(var s=0,c=f.length;s<c;s++){var u=f[s];if(o.props.hasOwnProperty(u))if("charSet"===u)n.has(u)?i=!1:n.add(u);else{var l=o.props[u],d=r[u]||new Set;d.has(l)?i=!1:(d.add(l),r[u]=d)}}}return i}}()).reverse().map((function(e,t){var n=e.key||t;return o.default.cloneElement(e,{key:n})}))}function h(e){var t=e.children,n=(0,o.useContext)(a.AmpStateContext),r=(0,o.useContext)(s.HeadManagerContext);return o.default.createElement(i.default,{reduceComponentsToState:p,headManager:r,inAmpMode:(0,c.isInAmpMode)(n)},t)}h.rewind=function(){};var b=h;t.default=b},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},EbDI:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},FPJl:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/firebase-hosting",function(){return n("xmqK")}])},FYa8:function(e,t,n){"use strict";var r;t.__esModule=!0,t.HeadManagerContext=void 0;var o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.HeadManagerContext=o},Ijbi:function(e,t,n){var r=n("WkPL");e.exports=function(e){if(Array.isArray(e))return r(e)}},Nsbk:function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},PJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},Qetd:function(e,t,n){"use strict";var r=Object.assign.bind(Object);e.exports=r,e.exports.default=e.exports},RIqP:function(e,t,n){var r=n("Ijbi"),o=n("EbDI"),i=n("ZhPi"),a=n("Bnag");e.exports=function(e){return r(e)||o(e)||i(e)||a()}},SksO:function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},W8MJ:function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},Xuae:function(e,t,n){"use strict";var r=n("RIqP"),o=n("lwsE"),i=n("W8MJ"),a=(n("PJYZ"),n("7W2i")),s=n("a1gu"),c=n("Nsbk");function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}t.__esModule=!0,t.default=void 0;var l=n("q1tI"),d=function(e){a(n,e);var t=u(n);function n(e){var i;return o(this,n),(i=t.call(this,e))._hasHeadManager=void 0,i.emitChange=function(){i._hasHeadManager&&i.props.headManager.updateHead(i.props.reduceComponentsToState(r(i.props.headManager.mountedInstances),i.props))},i._hasHeadManager=i.props.headManager&&i.props.headManager.mountedInstances,i}return i(n,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),n}(l.Component);t.default=d},ZhPi:function(e,t,n){var r=n("WkPL");e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},a1gu:function(e,t,n){var r=n("cDf5"),o=n("PJYZ");e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?o(e):t}},cDf5:function(e,t){function n(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},g4pe:function(e,t,n){e.exports=n("8Kt/")},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},lwAK:function(e,t,n){"use strict";var r;t.__esModule=!0,t.AmpStateContext=void 0;var o=((r=n("q1tI"))&&r.__esModule?r:{default:r}).default.createContext({});t.AmpStateContext=o},lwsE:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},xmqK:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n("nKUr"),o=n("g4pe"),i=n.n(o);function a(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(i.a,{children:[Object(r.jsx)("title",{children:"GraphQL Firebase on a Custom Domain with Firebase Hosting"}),Object(r.jsx)("meta",{content:"Add Firebase Hosting to your GraphQL Firebase function and serve your api up on your own brand.",name:"description"},"description")]}),Object(r.jsx)("div",{className:"jumbotron",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-lg-8 offset-lg-2",children:[Object(r.jsx)("h1",{className:"display-4",children:"Firebase Hosting"}),Object(r.jsxs)("p",{className:"lead",children:["Adding a custom url to your GraphQL server is easy when you integrate Firebase Hosting. Let\u2019s move out of your functions and into ",Object(r.jsx)("code",{children:"firebase.json"}),"."]})]})})})}),Object(r.jsx)("main",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-lg-8 offset-lg-2",children:[Object(r.jsx)("p",{children:"With your GraphQL Firebase configured in your Firebase Functions, the last step (albeit an optional one) is to connect it to a custom domain name and serve it up on Firebase Hosting. This will provide you with your own branding while still allowing you to take advantage of Firebase\u2019s global autoscaling."}),Object(r.jsxs)("p",{children:["Once you have"," ",Object(r.jsx)("a",{href:"https://firebase.google.com/docs/hosting/quickstart",children:"initialized your hosting on Firebase"}),", you can configure hosting to serve up your Firebase Function by modifying your ",Object(r.jsx)("code",{children:"firebase.json"}),". We\u2019ll assume your Firebase Function is ",Object(r.jsx)("code",{children:"graphql"})," for now, and then explain some options after this example ",Object(r.jsx)("code",{children:"firebase.json"}),"."]}),Object(r.jsx)("pre",{className:"bg-light p-3",children:Object(r.jsxs)("code",{children:[Object(r.jsx)("span",{className:"text-muted",children:"// Other firebase.json options here"}),Object(r.jsx)("br",{}),'...,\n"hosting": {\n  "public": "{relativePathToFunctionsDirectory}/node_modules/@undefinedai/graphql-firebase/lib/public",\n  "rewrites": [\n    {\n      "source": "**",\n      "function": "graphql"\n    }\n  ]\n}']})}),Object(r.jsxs)("p",{children:["With this configuration, all requests to your url are routed to your ",Object(r.jsx)("code",{children:"graphql"})," Firebase Function. From there, GraphQL Firebase can take over."]}),Object(r.jsxs)("p",{children:["The ",Object(r.jsx)("code",{children:"public"})," folder is required by Firebase Hosting. It can be empty, but it must be defined and present. If you\u2019re not uploading any other static assets, we have included an empty directory you can use like we do in the example."]}),Object(r.jsxs)("p",{children:["If you ",Object(r.jsx)("em",{children:"do"})," include other scripts or files (like if you use"," ",Object(r.jsx)("code",{children:"additionalRoutes"})," to set a custom favicon, or you reference locally hosted javascript and style files in your custom"," ",Object(r.jsx)("code",{children:"playgroundTemplate"}),", change this path to your own directory."]}),Object(r.jsx)("h2",{children:'Using "Local" Assets'}),Object(r.jsxs)("p",{children:["If in your Firebase Function you reference any script or other assets that will reside in your Firebase Hosting"," ",Object(r.jsx)("code",{children:"public"})," directory, be mindful of the relative paths."]}),Object(r.jsx)("p",{children:"When you Firebase Function is served up like we did above, it is as if it\u2019s in the root of your website. So if you want to serve up a custom favicon (for example), you might upload it to your hosting web root but call it in your Firebase Functions with something like this:"}),Object(r.jsx)("pre",{className:"bg-light p-3",children:Object(r.jsxs)("code",{children:[Object(r.jsxs)("span",{className:"text-muted",children:["// We use ES6+ and typescript in our projects,",Object(r.jsx)("br",{}),"// but you can adjust this to use commonjs"]}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),'import * as functions from "firebase-functions"\nimport express from "express"\n\nimport { GraphQLFirebase } from "@undefinedai/graphql-firebase"\n\nconst router = express.Router()\n\nrouter.use(\n  "/favicon.ico",\n  express.static("/favicon.png")\n)\n\nexport const graphql = functions.https.onRequest(GraphQLFirebase({ \n  additionalRoutes: router\n}))']})}),Object(r.jsxs)("p",{children:["Notice how the path to ",Object(r.jsx)("code",{children:"favicon.png"})," is relative to the hosting root and has nothing to do with where the file is relative to your function\u2019s source code. When your function goes to serve up the favicon to browser requests, express will look for the file at this root path and find the file in your hosting directory."]})]})})})]})}}},[["FPJl",0,1]]]);